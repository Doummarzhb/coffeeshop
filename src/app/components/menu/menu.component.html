<div *ngIf="userRole === 'admin'">
  <h2>Admin Page</h2>
  <p>Welcome, admin! You have full access to the system.</p>
  <button (click)="showAddMenuItemForm = !showAddMenuItemForm">
    {{ showAddMenuItemForm ? 'Cancel' : 'Add New Menu Item' }}
  </button>
  <div *ngIf="showAddMenuItemForm">
    <form (ngSubmit)="addNewItem()">
      <label for="name">Name:</label>
      <input id="name" [(ngModel)]="newItem.name" name="name" required />
      <label for="price">Price:</label>
      <input id="price" [(ngModel)]="newItem.price" name="price" required />
      <label for="description">Description:</label>
      <input id="description" [(ngModel)]="newItem.description" name="description" required />
      <label for="image">Image URL:</label>
      <input id="image" [(ngModel)]="newItem.image" name="image" required />
      <button type="submit">Add Item</button>
    </form>
  </div>
</div>

<input type="text" [(ngModel)]="searchTerm" (keyup)="applyFilter()" class="form-control" placeholder="Search items..." /><br>
<button (click)="applyFilter()">Filter Items</button>

<ul>
  <li *ngFor="let item of filteredItems | filter : searchTerm; let i = index">
    <mat-card>
      <mat-card-header>
        <mat-card-title>{{ item.name }}</mat-card-title>
        <mat-card-subtitle>{{ item.price }}</mat-card-subtitle>
      </mat-card-header>
      <img mat-card-image [src]="item.image" alt="{{ item.name }}" />
      <mat-card-content>
        <p>{{ item.description }}</p>
      </mat-card-content>
      <mat-card-actions>
        <button *ngIf="userRole !== 'admin'" mat-button routerLink="/reservation" (click)="addToCart(item)">
          Reservation
        </button>
        <button *ngIf="userRole !== 'admin'" mat-button routerLink="/checkout" color="white" (click)="buyNow(item)">
          BuyNow
        </button>
        <button *ngIf="userRole !== 'admin'" mat-button routerLink="/checkout" color="white" (click)="addTotal(item)">
          addtocard
        </button>

        <button *ngIf="userRole === 'admin'" mat-button color="warn" (click)="deleteItem(i)">
          Delete
        </button>
        <button *ngIf="userRole === 'admin'" mat-button color="primary" (click)="editItem(i)">
          Edit
        </button>
      </mat-card-actions>
    </mat-card>

    <div *ngIf="editingIndex === i">
      <form (ngSubmit)="updateItem()">
        <label for="edit-name">Name:</label>
        <input id="edit-name" [(ngModel)]="editingItem.name" name="edit-name" required />
        <label for="edit-price">Price:</label>
        <input id="edit-price" [(ngModel)]="editingItem.price" name="edit-price" required />
        <label for="edit-description">Description:</label>
        <input id="edit-description" [(ngModel)]="editingItem.description" name="edit-description" required />
        <label for="edit-image">Image URL:</label>
        <input id="edit-image" [(ngModel)]="editingItem.image" name="edit-image" required /><br>
        <button type="submit">Save Changes</button>
        <button type="button" (click)="cancelEdit()">Cancel</button>
      </form>
    </div>
  </li>
</ul>
